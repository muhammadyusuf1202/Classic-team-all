<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Team | Football Portal</title>
    <link rel="icon" type="image/png" sizes="32x32" href="./ChatGPT Image Jan 14, 2026, 06_28_40 PM.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Poppins:wght@300;400;600&display=swap');
        body { background: #020617; color: white; font-family: 'Poppins', sans-serif; overflow-x: hidden; }
        .font-sport { font-family: 'Orbitron', sans-serif; }
        .pitch-bg { background: radial-gradient(circle at top, #064e3b 0%, #020617 80%); }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .video-card:hover { transform: translateY(-8px); border-color: #22c55e; box-shadow: 0 10px 30px rgba(34, 197, 94, 0.2); }
        
        /* --- MODAL VA PLAYER TUZATILGAN --- */
        #videoModal { 
            display: none; position: fixed; inset: 0; 
            background: rgba(0,0,0,0.95); z-index: 2000; 
            align-items: center; justify-content: center; backdrop-filter: blur(10px); 
        }
        .modal-container { 
            position: relative; width: 95%; max-width: 1100px; 
            aspect-ratio: 16/9; border-radius: 25px; overflow: hidden; 
            background: #000; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 100px rgba(0,0,0,1);
        }
        /* Shorts rejimi uchun maxsus o'lcham */
        .shorts-mode { max-width: 400px !important; aspect-ratio: 9/16 !important; }

        .close-btn {
            position: fixed; top: 20px; right: 20px; 
            width: 50px; height: 50px; background: #ef4444; color: white;
            border-radius: 50%; display: flex; items-center; justify-content: center;
            font-size: 24px; cursor: pointer; z-index: 2100;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4); transition: 0.3s;
        }
        .close-btn:hover { transform: rotate(90deg) scale(1.1); background: #dc2626; }

        #chatNotify { 
            display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); 
            background: #22c55e; color: white; padding: 12px 25px; border-radius: 50px; 
            font-weight: bold; z-index: 3000; box-shadow: 0 10px 20px rgba(34, 197, 94, 0.4);
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn { from { top: -100px; } to { top: 20px; } }
        .chat-window { transform: translateY(20px); opacity: 0; pointer-events: none; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .chat-window.active { transform: translateY(0); opacity: 1; pointer-events: auto; }
    </style>
</head>
<body class="pitch-bg min-h-screen">

    <div id="chatNotify"><i class="fas fa-comment-dots mr-2"></i> Chatga xabar keldi!</div>

    <nav class="border-b border-white/4 px-6 py-4 flex flex-wrap justify-between items-center bg-black/60 sticky top-0 z-[100] backdrop-blur-xl">
        <div class="flex items-center gap-4">
            <div class="flex items-center justify-center w-14 h-14 border-2 border-green-500/30 rounded-full overflow-hidden">
                <img src="./ChatGPT Image Jan 14, 2026, 06_09_13 PM.png" alt="Logo" class="w-full h-full object-cover">
            </div>
            <h1 class="text-xl font-black italic font-sport tracking-tighter uppercase">
                <a href="./bio.html">CLASSIC <span class="text-green-500">TEAM</span></a>
            </h1>
        </div>

        <div class="flex-1 max-w-lg mx-6 relative group">
            <input type="text" id="searchInput" onkeyup="searchVideos()" placeholder="Gollarni qidirish..." class="w-full bg-white/5 border border-white/10 py-3 px-6 rounded-2xl outline-none focus:border-green-500 focus:bg-white/10 transition-all text-sm">
            <i class="fas fa-search absolute right-5 top-4 text-gray-500 group-focus-within:text-green-500"></i>
        </div>

        <div id="userInfo" class="text-sm font-bold text-green-500 hidden md:block"></div>
    </nav>

    <main class="max-w-7xl mx-auto p-6 md:p-10 space-y-20">
        <section id="videosSection">
            <div class="flex items-center gap-4 mb-8">
                <h2 class="text-2xl font-black italic uppercase font-sport tracking-widest text-green-500">Videolar</h2>
                <div class="h-[2px] flex-1 bg-gradient-to-r from-green-600 to-transparent"></div>
            </div>
            <div id="videoGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </section>

        <section id="shortsSection">
            <div class="flex items-center gap-4 mb-8">
                <h2 class="text-2xl font-black italic uppercase font-sport tracking-widest text-blue-500">Shorts</h2>
                <div class="h-[2px] flex-1 bg-gradient-to-r from-blue-600 to-transparent"></div>
            </div>
            <div id="shortsGrid" class="flex gap-4 overflow-x-auto pb-6 snap-x no-scrollbar"></div>
        </section>
    </main>

    <div id="videoModal" onclick="closeVideo()">
        <div class="close-btn"><i class="fas fa-times"></i></div>
        <div class="modal-container" id="modalContainer" onclick="event.stopPropagation()">
            </div>
    </div>

    <div class="fixed bottom-6 right-6 z-[100]">
        <div id="chatBox" class="chat-window glass w-80 h-[480px] rounded-[35px] mb-4 flex flex-col overflow-hidden border border-green-500/20 shadow-2xl">
            <div class="bg-green-600 p-5 font-bold flex justify-between items-center text-sm">
                <span><i class="fas fa-headset mr-2"></i> Bog'lanish</span>
                <button onclick="toggleChat()" class="hover:scale-125 transition"><i class="fas fa-times"></i></button>
            </div>
            <div id="namePrompt" class="p-8 text-center space-y-5 my-auto">
                <div class="bg-white/5 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-2xl text-green-500"><i class="fas fa-user-edit"></i></div>
                <p class="text-xs text-gray-400">Suhbatni boshlash uchun ismingizni kiriting:</p>
                <input type="text" id="chatUserName" placeholder="Ismingiz..." class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-green-500 text-center">
                <button onclick="startChat()" class="w-full bg-green-600 py-3 rounded-2xl text-sm font-bold shadow-lg shadow-green-600/30 active:scale-95 transition">Boshlash</button>
            </div>
            <div id="chatInterface" class="hidden flex-1 flex flex-col overflow-hidden">
                <div id="msgList" class="flex-1 p-5 overflow-y-auto space-y-4 text-[13px] flex flex-col"></div>
                <div class="p-4 bg-white/5 border-t border-white/10 flex gap-2">
                    <input type="text" id="msgInput" placeholder="Xabar..." class="flex-1 bg-black/40 border border-white/10 rounded-full px-5 py-2.5 outline-none focus:border-green-500 transition-all text-sm">
                    <button onclick="sendMsg()" class="bg-green-600 w-10 h-10 rounded-full flex items-center justify-center shadow-lg"><i class="fas fa-paper-plane text-xs"></i></button>
                </div>
            </div>
        </div>
        <button onclick="toggleChat()" class="w-16 h-16 bg-green-600 rounded-full shadow-2xl flex items-center justify-center text-2xl hover:scale-110 transition-all">
            <i class="fas fa-comments"></i>
        </button>
    </div>

    <footer class="bg-black/80 border-t border-white/10 py-16 mt-20">
        <div class="max-w-7xl mx-auto px-10 flex flex-col md:flex-row justify-between items-center gap-12">
            <div class="text-center md:text-left space-y-2">
                <h3 class="text-2xl font-black italic font-sport uppercase tracking-tighter">Classic <span class="text-green-500">Team</span></h3>
                <p class="text-gray-500 text-xs">CLASSIC TEAM • O'zbekistondagi №1 futbol portali</p>
            </div>
            <div class="flex gap-10">
                <a href="https://t.me/Classicteam1" target="_blank" class="group flex flex-col items-center gap-2">
                    <i class="fab fa-telegram text-4xl text-blue-400 group-hover:scale-125 transition"></i>
                    <span class="text-[10px] text-gray-500 uppercase font-bold tracking-widest">Telegram</span>
                </a>
                <a href="https://www.youtube.com/@CLASSIC.TEAM_01" target="_blank" class="group flex flex-col items-center gap-2">
                    <i class="fab fa-youtube text-4xl text-red-600 group-hover:scale-125 transition"></i>
                    <span class="text-[10px] text-gray-500 uppercase font-bold tracking-widest">YouTube</span>
                </a>
            </div>
        </div>
        <p class="text-center text-[10px] text-gray-700 mt-12 uppercase tracking-[5px]">All Rights Reserved 2026</p>
    </footer>

    <script>
        let lastMsgCount = JSON.parse(localStorage.getItem('chats') || "[]").length;

        function toggleChat() { 
            document.getElementById('chatBox').classList.toggle('active'); 
            document.getElementById('chatNotify').style.display = 'none';
        }

        function startChat() {
            const name = document.getElementById('chatUserName').value || localStorage.getItem('current_user');
            if(!name) return alert("Ismingizni yozing!");
            localStorage.setItem('current_user', name);
            document.getElementById('userInfo').innerText = "Salom, " + name;
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('namePrompt').classList.add('hidden');
            document.getElementById('chatInterface').classList.remove('hidden');
            renderMsgs();
        }

        function sendMsg() {
            const inp = document.getElementById('msgInput');
            if(!inp.value) return;
            let chats = JSON.parse(localStorage.getItem('chats') || "[]");
            const me = localStorage.getItem('current_user');
            chats.push({ user: me, text: inp.value, time: new Date().toLocaleTimeString() });
            localStorage.setItem('chats', JSON.stringify(chats));
            inp.value = "";
            renderMsgs();
            lastMsgCount = chats.length;
        }

        function renderMsgs() {
            const list = document.getElementById('msgList');
            const chats = JSON.parse(localStorage.getItem('chats') || "[]");
            const me = localStorage.getItem('current_user');
            const myChats = chats.filter(c => c.user === me || (c.user === 'Admin' && c.to === me));
            list.innerHTML = myChats.map(c => `
                <div class="flex flex-col ${c.user === 'Admin' ? 'items-start' : 'items-end'} mb-2">
                    <div class="p-3 px-4 rounded-2xl ${c.user === 'Admin' ? 'bg-blue-600 rounded-tl-none' : 'bg-green-600 rounded-tr-none'} max-w-[85%]">
                        <p class="text-[9px] font-bold opacity-60 mb-1 uppercase">${c.user}</p>
                        <p class="text-sm leading-relaxed">${c.text}</p>
                    </div>
                </div>
            `).join('');
            list.scrollTop = list.scrollHeight;
        }

        // --- TO'LIQ TUZATILGAN OPENVIDEO ---
        function openVideo(videoSrc, type, title) {
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('modalContainer');
            let videoHTML = '';

            // 1. YouTube uchun maxsus Iframe
            if (videoSrc.includes('youtube.com') || videoSrc.includes('youtu.be')) {
                let videoId = videoSrc.split('v=')[1] || videoSrc.split('/').pop();
                if(videoId.includes('&')) videoId = videoId.split('&')[0];
                videoHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0" class="w-full h-full" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            } 
            // 2. Streamable uchun maxsus Iframe
            else if (videoSrc.includes('streamable.com')) {
                const videoId = videoSrc.split('/').pop();
                videoHTML = `<iframe src="https://streamable.com/e/${videoId}?autoplay=1" class="w-full h-full" frameborder="0" allowfullscreen></iframe>`;
            } 
            // 3. Oddiy MP4 fayllar uchun
            else {
                videoHTML = `<video src="${videoSrc}" controls autoplay class="w-full h-full bg-black"></video>`;
            }

            container.className = type === 'shorts' ? 'modal-container shorts-mode' : 'modal-container';
            container.innerHTML = videoHTML;
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeVideo() {
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('modalContainer');
            modal.style.display = 'none';
            container.innerHTML = ""; 
            document.body.style.overflow = 'auto';
        }

        function loadContent() {
            const videos = JSON.parse(localStorage.getItem('uploaded_videos') || "[]");
            const vGrid = document.getElementById('videoGrid');
            const sGrid = document.getElementById('shortsGrid');
            
            if(videos.length === 0) {
                if(vGrid) vGrid.innerHTML = "<p class='col-span-full text-center text-gray-500 italic py-10'>Hozircha videolar yuklanmagan...</p>";
                return;
            }

            vGrid.innerHTML = videos.filter(v => v.type === 'video').map(v => `
                <div onclick="openVideo('${v.video}', 'video', '${v.title}')" class="video-card glass rounded-[35px] overflow-hidden p-3 transition-all hover:scale-[1.03] cursor-pointer group">
                    <div class="relative aspect-video rounded-[25px] overflow-hidden bg-black">
                        <img src="${v.img}" class="w-full h-full object-cover opacity-60 group-hover:scale-110 transition duration-700">
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition backdrop-blur-sm bg-black/20">
                            <i class="fas fa-play text-4xl text-green-500"></i>
                        </div>
                    </div>
                    <div class="p-4 font-bold text-sm tracking-tight text-center truncate uppercase italic">${v.title}</div>
                </div>
            `).join('');

            sGrid.innerHTML = videos.filter(v => v.type === 'shorts').map(v => `
                <div onclick="openVideo('${v.video}', 'shorts', '${v.title}')" class="video-card glass rounded-[30px] overflow-hidden p-2 aspect-[9/16] shrink-0 w-[220px] cursor-pointer group snap-start">
                    <div class="relative h-full rounded-[22px] overflow-hidden bg-black">
                        <img src="${v.img}" class="h-full w-full object-cover opacity-70">
                        <div class="absolute inset-0 bg-gradient-to-t from-black flex flex-col justify-end p-5">
                            <p class="text-[10px] font-bold uppercase truncate bg-white/10 backdrop-blur-md py-2 px-3 rounded-xl border border-white/10 tracking-tighter">${v.title}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchVideos() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.video-card').forEach(card => {
                const title = card.innerText.toLowerCase();
                card.style.display = title.includes(q) ? 'block' : 'none';
            });
        }

        setInterval(() => {
            const chats = JSON.parse(localStorage.getItem('chats') || "[]");
            const me = localStorage.getItem('current_user');
            if(chats.length > lastMsgCount) {
                const lastMsg = chats[chats.length - 1];
                if(lastMsg.user === 'Admin' && lastMsg.to === me) {
                    document.getElementById('chatNotify').style.display = 'block';
                }
                lastMsgCount = chats.length;
                renderMsgs();
            }
        }, 3000);

        window.onload = () => { 
            if(localStorage.getItem('current_user')) startChat(); 
            loadContent(); 
        }
    </script>
</body>

</html>
